{% extends 'base.html' %}

{% block content %}

<div class="max-w-md mx-auto bg-white p-6 rounded-2xl shadow-md border border-gray-100 mt-6">

    

    <h2 class="text-3xl font-semibold mb-6 text-center tracking-tight">
        {{ request.user.username }}
    </h2>

    <div class="mb-6">
        <p class="text-sm text-gray-500">Subscription</p>
        <p class="text-xl font-semibold text-gray-800 mt-1">
            {{ request.user.user_type }}
        </p>
    </div>

  {% if subscription and subscription.status == 'active' %}
    <div class="bg-green-50 border border-green-200 text-green-800 px-4 py-4 rounded-xl mb-6">
        <p class="font-semibold text-lg">Subscription Active</p>
        <p class="text-sm mt-1">
            Until: <span class="font-medium">{{ subscription.current_period_end }}</span>
        </p>
    </div>

    {% if subscription.plan == 'basic' %}
        <!-- Upgrade to Pro -->
        <form action="{% url 'wallpapers:create_checkout_session' %}" method="POST">
            {% csrf_token %}
            <input type="hidden" name="plan" value="pro">
            <button 
                class="w-full bg-purple-600 text-white py-3 rounded-xl hover:bg-purple-700 active:scale-[0.98] transition-all">
                Upgrade to Pro
            </button>
        </form>
    {% endif %}

{% else %}
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-4 rounded-xl mb-6">
        <p class="font-semibold text-lg">No Active Subscription</p>
    </div>

    <a href="{% url 'wallpapers:subscribe_page' %}" 
       class="block w-full text-center bg-blue-600 text-white py-3 rounded-xl hover:bg-blue-700 active:scale-[0.98] transition-all">
       Subscribe Now
    </a>
{% endif %}


</div>

{% endblock %}
